<div class="modal fade" id="modal-brand">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header bg-primary">
                <h5 class="modal-title">Meter Brand</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span></button>
            </div>
            <div class="modal-body">
                <form method="POST" action="">
                    {% csrf_token %}

                    <div class="form-group row">
                        <div class="col input-group input-group-sm">
                            <input type="text" class="form-control form-control-sm" id="id_brand" name="brand"
                                placeholder="Enter meter brand">
                                <div class="input-group-append">
                                    <button type="button" class="btn btn-success mr-1 "><span
                                            style="font-size: 12px;"> Add </span></button>
                                </div>
                        </div>
                    </div>
                    <!-- <div class="form-group row">
                        <div class="col-sm-4 input-group input-group-sm">
                            <input type="password" class="form-control form-control-sm" id="id_password1" name="password1"
                                value="{{ form_ex.up }}">
                            <div class="input-group-append">
                                <div class="input-group-text">
                                    <i class="fal fa-eye-slash" id="togglePassword"></i>
                                </div>
                            </div>
                        </div>
                    </div> -->
                </form>
                <div class="col">
                    <table id="table_brand" class="table table-nowrap table-striped table-sm dtr-inline">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Brand</th>
                            </tr>
                        </thead>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>


<script type="text/javascript">

    let ssbrandUrl = "{% url 'ssbrand' %}";
    // $('#modal-brand').on('load', function ()
    //     {

    //         alert("hello!")
    //     });

    //  window.onload = function ()
        // {
            function loadBrand()
            {
                let acqTable = $('#table_brand').DataTable({
                    "searching": false,
                    "info": false,
                    "paging": false,
                    "select": true,
                    "select": {
                        "style": 'multi',
                        "selector": 'td:first-child',
                    },
                    "serverSide": true,
                    "processing": true,
                    "ajax": function (data, callback, settings)
                    {
                        var sort_column_name = data.columns[data.order[0].column].data.replace(/\./g, "__");
                        var direction = "";
                        if (data.order[0].dir == "desc") { direction = "-" };
                        $.get(ssbrandUrl, {
                            limit: data.length,
                            start: data.start,
                            filter: data.search.value,
                            order_by: direction + sort_column_name
                        }, function (res)
                        {
                            callback({
                                recordsTotal: res.length,
                                recordsFiltered: res.length,
                                data: res.objects
                            });
                        });
                    },
                    columns: [
                        { "data": "id" },
                        { "data": "brand" },
                    ]
                });
                acqTable.column(0).visible(false);
            }
            loadBrand();

            // function show_details(id)
            // {
            //     $.ajax({
            //         url: acqSelectedUrl,
            //         method: 'GET',
            //         type: 'GET',
            //         data: {
            //             id: id,
            //         },
            //         success: function (data)
            //         {
            //             $("#metersdata").html(data);
            //         },
            //         error: function (e)
            //         {
            //             alert('err: meters.js - show_details');
            //         }
            //     });
            // } change_table3_data(id, 0);

        // };


</script>